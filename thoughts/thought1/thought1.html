<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Experiment ‚Äî Template (exp1)</title>
  <meta name="description" content="Template experiment post. Use this as a starting point for documenting experiments, simulations, diagrams (Excalidraw), and code snippets." />

  <!-- Fonts (same as your site) -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --accent: #20c997;
      --muted: #666;
      --bg: #fff;
      --card: #fafafa;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace;
    }

    html,body{height:100%;}
    body{
      font-family: 'Nunito Sans', Arial, sans-serif;
      font-size:18px;
      line-height:1.6;
      max-width:1100px;
      margin:0 auto;
      padding:18px;
      color:#222;
      background:var(--bg);
    }

    /* NAVBAR */
    .navbar {
        width: 100%;
        background-color: #fff;
        border-bottom: 1px solid #ddd;
        overflow: hidden;
        text-align: center; /* Center align text */
        font-size: 14px; /* Decrease font size for navbar on mobile */

    }
    .navbar a {
        display: inline-block;
        color: black;
        text-align: center;
        padding: 10px 15px; /* Adjusted padding for better touch target */
        text-decoration: none;
        position: relative; /* Ensure relative positioning for pseudo-element */
    }
    .navbar a::after {
        content: '';
        display: block;
        width: 0;
        height: 2px;
        background-color: #20c997;
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        transition: width 0.3s ease; /* Smooth transition for width */
    }
    .navbar a:hover::after {
        width: 100%; /* Expand width on hover */
    }

    /* HEADER */
    header.experiment-head{padding:12px 0 18px 0}
    header h1{font-family:'Montserrat',sans-serif;font-weight:600;margin:0 0 6px 0;color:#222}
    .meta{display:flex;gap:12px;align-items:center;color:var(--muted);font-size:14px}
    .tags{display:flex;gap:6px}
    .tag{padding:6px 8px;background:var(--card);border-radius:999px;font-weight:600;font-size:13px}

    /* HERO */
    .hero{margin:18px 0;border-radius:10px;overflow:hidden;border:1px solid #eee}
    .hero img{width:100%;height:auto;display:block}

    /* ARTICLE LAYOUT */
    .content{display:grid;grid-template-columns: 1fr 320px;gap:30px}
    main.article{background:transparent}
    aside.sidebar{position:relative}

    .section{margin:18px 0}
    h2{font-family:'Montserrat',sans-serif;font-weight:600;margin:8px 0}

    /* CODE */
    pre{background:#0b1221;color:#e6eef8;padding:16px;border-radius:8px;overflow:auto;font-family:var(--mono);font-size:14px}
    .code-toolbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
    .btn{background:var(--accent);color:white;border:none;padding:8px 10px;border-radius:8px;cursor:pointer;font-weight:700}
    .btn.secondary{background:#edfdf8;color:#0a3b2f}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid var(--accent)}

    /* EXCALIDRAW VIEWER */
    .ex-viewer{border:1px solid #e8f0ef;background:#fff;padding:12px;border-radius:10px}
    .ex-top{display:flex;justify-content:space-between;align-items:center;gap:12px}
    .viewer-stage{display:flex;align-items:center;justify-content:center;min-height:360px;border-radius:6px;overflow:hidden;margin-top:12px;background:#fff}
    .viewer-stage img{max-width:100%;height:auto;display:block}
    .viewer-controls{display:flex;gap:8px;margin-top:8px}
    .thumbs{display:flex;gap:8px;margin-top:8px;overflow:auto}
    .thumbs img{height:56px;border-radius:6px;border:1px solid #eee}

    /* SIDEBAR */
    .card{background:var(--card);padding:12px;border-radius:10px;border:1px solid #eee}
    .meta-row{display:flex;justify-content:space-between;gap:8px}

    /* FOOTER */
    footer{border-top:1px solid #eee;padding:18px 0;margin-top:26px;color:var(--muted)}

    /* RESPONSIVE */
    @media (max-width:980px){
      .content{grid-template-columns:1fr;}
      aside.sidebar{order:2}
    }
  </style>

</head>
<body>

  <!--
    NOTE: This file is a template. Put this HTML at: experiments/exp1/exp1.html
    Directory layout (recommended):

    experiments/
      exp1/
        exp1.html          <-- this file
        assets/
          images/
            hero.jpg
            fig-1.png
          excalidraw/
            slideList.json   <-- array with slide objects (see README below)
            slide1.svg
            slide2.svg
            exp1.json        <-- full Excalidraw JSON (press "Open in Excalidraw")
          code/
            sample.py

    To add slides: edit assets/excalidraw/slideList.json (no need to edit HTML)
  -->

  <nav class="navbar">
    <a href="/">Home</a>
    <a href="about.html">About</a>
    <a href="thoughts.html">Thoughts</a>
    <a href="experiments.html">Experiments</a>
    <a href="https://drive.google.com/drive/folders/1ATfkDZ_2_wGB6TsgqVIYR1YFucV3yJG7?usp=sharing" target="_blank">Resume</a>
    <!-- <div style="margin-left:auto;color:var(--muted);font-size:13px">exp template</div> -->
  </nav>

  <header class="experiment-head">
    <h1>Experiment: Template ‚Äî exp1</h1>
    <div class="meta">
      <div>by <strong>Siddharth Mishra</strong></div>
      <div>‚Ä¢</div>
      <div><time datetime="2025-10-03">Oct 3, 2025</time></div>
      <div>‚Ä¢</div>
      <div class="reading-time">~ <span id="readingTime">3</span> min read</div>
      <div class="tags">
        <span class="tag">AI Chip</span>
        <span class="tag">Simulation</span>
        <span class="tag">Training</span>
      </div>
    </div>
  </header>

  <div class="hero">
    <!-- dummy image; replace with experiments/exp1/assets/images/hero.jpg -->
    <img src="assets/images/hero.jpg" alt="Experiment hero image (replace)" onerror="this.style.opacity=.5;this.alt='[Replace hero.jpg in assets/images]';" />
  </div>

  <div class="content">

    <main class="article">

      <section class="section">
        <h2>Abstract</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer ut aliquet diam. Morbi sit amet ante sed sapien laoreet bibendum. Praesent euismod urna sit amet orci tincidunt, vitae ultrices neque volutpat. Quisque volutpat, tortor a condimentum tincidunt, sapien arcu volutpat risus, nec pulvinar ipsum urna quis lorem. Aenean dictum, lorem nec tempor fermentum, orci lacus commodo augue, nec pulvinar massa mauris id metus.</p>
      </section>

      <section class="section">
        <h2>Excalidraw simulation (slides)</h2>

        <div class="ex-viewer card">
          <div class="ex-top">
            <div style="font-weight:700">Diagram viewer</div>
            <div style="display:flex;gap:8px;align-items:center">
              <button id="prevBtn" class="btn secondary" aria-label="previous">‚óÄ Prev</button>
              <button id="nextBtn" class="btn secondary" aria-label="next">Next ‚ñ∂</button>
              <button id="playBtn" class="btn ghost">Play</button>
              <button id="openExcalidraw" class="btn" title="Open current JSON slide in Excalidraw">Open in Excalidraw</button>
              <a id="downloadJson" class="btn ghost" download>Download JSON</a>
            </div>
          </div>

          <div id="viewerStage" class="viewer-stage" aria-live="polite">
            <!-- slide preview will load here -->
            <div id="viewerPlaceholder" style="text-align:center;color:var(--muted);padding:28px">Loading slides...</div>
          </div>

          <div id="slideTitle" style="margin-top:8px;font-weight:600;color:var(--muted)"></div>
          <div class="thumbs" id="thumbs"></div>
        </div>

        <small style="display:block;margin-top:8px;color:var(--muted)">Tip: edit <code>assets/excalidraw/slideList.json</code> to add/remove slides. Use SVG/PNG previews or point to an Excalidraw JSON file.</small>
      </section>

      <section class="section">
        <h2>Simulation ‚Äî explanation</h2>
        <p>Describe the simulation here. Include equations, parameter tables and important observations. Example equation:</p>
        <p><em>Params: learning rate = 1e-3, batch = 64, quantization = 8-bit</em></p>

        <h3>Key steps</h3>
        <ol>
          <li>Prepare dataset and preprocess</li>
          <li>Design architecture and map to simulated hardware</li>
          <li>Run training/inference simulation</li>
          <li>Collect metrics and visualize</li>
        </ol>

      </section>

      <section class="section">
        <h2>Code snippets</h2>

        <div class="code-toolbar">
          <div style="font-weight:700">train.py ‚Äî minimal example</div>
          <div>
            <button class="btn" data-action="copy" data-target="sampleCode">Copy</button>
            <button class="btn ghost" data-action="download" data-target="sampleCode" data-filename="train.py">Download</button>
          </div>
        </div>

        <pre><code id="sampleCode" class="language-python"># Minimal training loop (lorem ipsum)
import torch

model = torch.nn.Linear(10,2)
opt = torch.optim.Adam(model.parameters(), lr=1e-3)

for epoch in range(3):
    x = torch.randn(16,10)
    y = torch.randint(0,2,(16,))
    logits = model(x)
    loss = torch.nn.functional.cross_entropy(logits, y)
    loss.backward()
    opt.step()
    opt.zero_grad()
    print(f"epoch {epoch} loss={loss.item():.3f}")
</code></pre>

        <p style="color:var(--muted)">You can add multiple <code>&lt;pre&gt;&lt;code&gt;</code> blocks. The buttons above copy/download the raw text from the code block.</p>
      </section>

      <section class="section">
        <h2>Figures & gallery</h2>
        <p>Place figures under <code>assets/images</code>. Use the lightbox below ‚Äî click a thumbnail to open full size in a new tab.</p>
        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <a href="assets/images/fig-1.png" target="_blank"><img src="assets/images/fig-1.png" alt="figure 1" style="height:120px;border-radius:8px;border:1px solid #eee" onerror="this.style.opacity=.4;this.alt='[Replace fig-1.png]'" /></a>
          <a href="assets/images/fig-2.png" target="_blank"><img src="assets/images/fig-2.png" alt="figure 2" style="height:120px;border-radius:8px;border:1px solid #eee" onerror="this.style.opacity=.4;this.alt='[Replace fig-2.png]'" /></a>
        </div>
      </section>

      <section class="section">
        <h2>Share & reproducibility</h2>
        <p>
          Provide links to: a) dataset, b) colab / binder / dockerfile, c) trained checkpoints, d) notebook. Example quick-links are placed in the sidebar.
        </p>

      </section>

      <footer>
        <div style="display:flex;justify-content:space-between;gap:12px;align-items:center">
          <div>¬© Siddharth Mishra ‚Äî Experiment Template</div>
          <div style="color:var(--muted)">Last updated: <time datetime="2025-10-03">Oct 3, 2025</time></div>
        </div>
      </footer>

    </main>

    <aside class="sidebar">
      <div class="card">
        <h3 style="margin-top:0">Quick links</h3>
        <div class="meta-row"><div>üìÅ Assets</div><div><a href="assets/">open</a></div></div>
        <div style="margin-top:12px">
          <a class="btn" href="#" id="openNotebook">Open Colab</a>
        </div>

        <hr style="margin:12px 0;border:none;border-top:1px solid #eee" />

        <h4 style="margin:0 0 8px 0">Downloads</h4>
        <ul style="padding-left:18px;margin:8px 0;color:var(--muted)">
          <li><a href="assets/code/sample.py" download>sample.py</a></li>
          <li><a href="assets/excalidraw/exp1.json" download>excalidraw JSON</a></li>
        </ul>

        <hr style="margin:12px 0;border:none;border-top:1px solid #eee" />
        <h4 style="margin:0 0 8px 0">Metadata</h4>
        <p style="margin:0;color:var(--muted)">Model: <strong>CustomSim v0.1</strong></p>
        <p style="margin:0;color:var(--muted)">Dataset: <strong>synthetic</strong></p>
      </div>
    </aside>

  </div>

  <script>
    /*
      exp1.html (template) behavior summary:
      - Loads slides from assets/excalidraw/slideList.json (an array of {type,src,title,thumb?})
      - Supports svg/png preview slides and 'json' slides where Open in Excalidraw loads the JSON into excalidraw.com
      - Copy/download buttons for code blocks
      - Keyboard Left/Right to navigate slides
      - Play/Pause autoplay for quick demos

      Create slideList.json (example):
      [
        {"type":"svg","src":"assets/excalidraw/slide1.svg","title":"Overview","thumb":"assets/excalidraw/thumb1.png"},
        {"type":"svg","src":"assets/excalidraw/slide2.svg","title":"Mapping"},
        {"type":"json","src":"assets/excalidraw/exp1.json","title":"Open interactive"}
      ]
    */

    const slideListPath = 'assets/excalidraw/slideList.json';
    let slides = [];
    let idx = 0;
    let autoplay = null;

    async function loadSlideList(){
      try{
        const res = await fetch(slideListPath);
        if(!res.ok) throw new Error('slideList not found');
        slides = await res.json();
        if(!Array.isArray(slides)) slides = [];
        renderThumbs();
        loadSlide(0);
      }catch(err){
        document.getElementById('viewerStage').innerHTML = '<div style="padding:28px;color:var(--muted)">No slides: create assets/excalidraw/slideList.json (see template comments)</div>';
        console.warn(err);
      }
    }

    function renderThumbs(){
      const thumbs = document.getElementById('thumbs');
      thumbs.innerHTML = '';
      slides.forEach((s,i)=>{
        const img = document.createElement('img');
        img.alt = s.title || ('slide '+(i+1));
        img.onclick = ()=>loadSlide(i);
        if(s.thumb) img.src = s.thumb;
        else if(s.type==='svg' || s.type==='png' || s.type==='jpg') img.src = s.src;
        else img.src = 'data:image/svg+xml;utf8,' + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="200" height="120"><rect width="100%" height="100%" fill="#f7f7f7"/><text x="10" y="20" fill="#777">'+(s.title||'json slide')+'</text></svg>');
        thumbs.appendChild(img);
      });
    }

    function setViewerHtml(html){
      document.getElementById('viewerStage').innerHTML = html;
    }

    async function loadSlide(i){
      if(!slides.length) return;
      idx = ((i % slides.length)+slides.length)%slides.length;
      const s = slides[idx];
      document.getElementById('slideTitle').textContent = s.title || '';
      document.getElementById('openExcalidraw').style.display = (s.type==='json') ? 'inline-block' : 'none';
      document.getElementById('downloadJson').style.display = (s.type==='json') ? 'inline-block' : 'none';
      document.getElementById('downloadJson').href = s.type==='json' ? s.src : '#';

      if(s.type==='svg' || s.type==='png' || s.type==='jpg'){
        setViewerHtml('<img src="'+s.src+'" alt="'+(s.title||'slide')+'" onerror="this.style.opacity=.5;this.alt=\'[missing slide]\'" />');
      }else if(s.type==='json'){
        // show a friendly placeholder and Open in Excalidraw button
        setViewerHtml('<div style="text-align:center;color:var(--muted);padding:24px">This slide is an Excalidraw JSON file. Click "Open in Excalidraw" to load it into excalidraw.com for interactive editing.</div>');
      }else{
        setViewerHtml('<div style="text-align:center;color:var(--muted);padding:24px">Unsupported slide type: '+(s.type||'')+'</div>');
      }

      // highlight current thumb
      const thumbs = document.getElementById('thumbs').children;
      for(let j=0;j<thumbs.length;j++) thumbs[j].style.outline = (j===idx)? '3px solid rgba(32,201,151,0.12)' : 'none';
    }

    function prev(){ loadSlide(idx-1); }
    function next(){ loadSlide(idx+1); }

    document.getElementById('prevBtn').addEventListener('click', prev);
    document.getElementById('nextBtn').addEventListener('click', next);

    // keyboard nav
    window.addEventListener('keydown', (e)=>{
      if(e.key==='ArrowLeft') prev();
      if(e.key==='ArrowRight') next();
    });

    // autoplay
    document.getElementById('playBtn').addEventListener('click', ()=>{
      const btn = document.getElementById('playBtn');
      if(autoplay){
        clearInterval(autoplay); autoplay = null; btn.textContent = 'Play';
      }else{
        autoplay = setInterval(()=>{ next(); }, 2500); btn.textContent = 'Pause';
      }
    });

    // open in excalidraw
    document.getElementById('openExcalidraw').addEventListener('click', async ()=>{
      const s = slides[idx];
      if(!s || s.type!=='json') return;
      try{
        const res = await fetch(s.src);
        if(!res.ok) throw new Error('cannot load json');
        const json = await res.text();
        // Excalidraw supports opening with: https://excalidraw.com/#json=<urlencoded-json>
        const url = 'https://excalidraw.com/#json=' + encodeURIComponent(json);
        window.open(url, '_blank');
      }catch(err){
        alert('Failed to open Excalidraw JSON (check console)'); console.error(err);
      }
    });

    // code copy/download
    document.querySelectorAll('[data-action="copy"]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const target = document.getElementById(btn.dataset.target);
        if(!target) return;
        navigator.clipboard.writeText(target.textContent).then(()=>{
          btn.textContent = 'Copied'; setTimeout(()=>btn.textContent='Copy',1500);
        });
      });
    });

    document.querySelectorAll('[data-action="download"]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const target = document.getElementById(btn.dataset.target);
        const filename = btn.dataset.filename || 'snippet.txt';
        const blob = new Blob([target.textContent], {type:'text/plain'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a'); a.href = url; a.download = filename; document.body.appendChild(a); a.click(); a.remove();
        URL.revokeObjectURL(url);
      });
    });

    // reading time calc (rough)
    function calcReadingTime(){
      const text = Array.from(document.querySelectorAll('main.article')).map(n=>n.innerText).join(' ');
      const words = (text.match(/\w+/g)||[]).length;
      const minutes = Math.max(1, Math.round(words/200));
      document.getElementById('readingTime').textContent = minutes;
    }

    // startup
    (async ()=>{ await loadSlideList(); calcReadingTime(); })();

  </script>

</body>
</html>
